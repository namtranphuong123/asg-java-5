<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{admin/dashboarhlayout.html}">

<head>


</head>

<body>


	<section class="row" layout:fragment="content">
		<div class="col   mt-4">
			<div class="card"style="background-color: khaki;">
				<div class="card-header">
					<h2>List of Product</h2>
				</div>
				<div class="card-body">
					<div th:if="${message != null}" class="alert alert-primary" role="alert">
						<i>[[${message}]]</i>
					</div>
					<div class="row nt-2 mb-2">
						<div class="col">
							<form th:action="@{/admin/products/search}">
								<div class="form-inline float-left">
									<label for="name">Name</label> <input type="text" class="form-control ml-2"
										name="name" id="name" aria-describedby="helpId" placeholder="name">

									<button class="btn btn-outline-primary ml-2">Search</button>
								</div>
							</form>
							<div class="float-right">
								<a class="btn btn-outline-primary" th:href="@{/admin/products/add}">Add new product</a>
							</div>
						</div>
					</div>
					<div class="row" th:if="${!productPage.hasContent()}">
						<div class="col">
							<div class="alert alert-danger" role="alert">
								<strong>No product File</strong>
							</div>
						</div>
					</div>
					<table class="table table-striped table-inverse " th:if="${productPage.hasContent()}">
						<thead class="thead-inverse">
							<tr>
								<th><input type="checkbox" class="form-check-input" name="" id=""></th>
								<th>Image</th>

								<th>Name</th>
								<th>Unit Price</th>
								<th>Discount</th>
								<th>Status</th>
								<th>Category Id</th>

								<th></th>
							</tr>
						</thead>
						<tbody>
							<tr th:each=" product, iStat: ${productPage.content}">
								<td scope="row"><input type="checkbox" class="form-check-inline" name="" id="">
									[[${product.productId}]]</td>
								<td><img th:src="@{'/images/'+${product.image}}" class="img-fluid " alt=""
										width="240 px"></td>
								<td>[[${product.name}]]</td>
								<td>[[${product.unitPrice}]]</td>
								<td>[[${product.discount}]] %</td>
								<td th:text="${product.status}"></td>
								<td>[[${product.category.name}]]</td>
								<td style="float: right;"><a th:href="@{'/admin/products/view/' + ${product.productId}}"
										class="btn btn-outline-info"><i class="fas fa-street-view    "></i>view</a>

									<a th:data-id="${product.productId}" th:data-name="${product.name}"
										onclick="showConfirmModalDialog(this.getAttribute('data-id'), this.getAttribute('data-name'))"
										class="btn btn-outline-danger"><i class="fas fa-recycle"></i>Delete</a>

									<a th:href="@{'/admin/products/edit/' +${product.productId}}"
										class="btn btn-outline-warning"><i class="fas fa-edit    "></i>Edit</a>
								</td>
							</tr>
						</tbody>
					</table>
					<script>
						function showConfirmModalDialog(id, name) {
							$('#productName').text(name);
							$('#yesOption').attr('href', '/admin/products/delete/' + id);
							$('#confirmationId').modal('show');
						}
					</script>


					<!-- Modal -->
					<div class="modal fade" id="confirmationId" tabindex="-1" role="dialog"
						aria-labelledby="modelTitleId" aria-hidden="true">
						<div class="modal-dialog" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title">Confirmation</h5>
									<button type="button" class="close" data-dismiss="modal" aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
								</div>
								<div class="modal-body">
									Do you want to delete "<span id="productName"></span>"?
								</div>
								<div class="modal-footer">
									<a id="yesOption" type="button" class="btn btn-danger">Yes</a>
									<button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
								</div>
							</div>
						</div>
					</div>

				</div>
			</div>
			<div class="card-footer text-muted">
				<form action="">
					<div class="form-inline float-left">
						<label for="size">Page Size</label>
						<!-- sử dụng sự kiện onchange this form để sử lý hiển thị trên trang để gửi dữ liệu và cập nhập lại nội dung trên trang-->
						<select name="size" id="size" class="form-control" onchange="this.form.submit()">

							<option th:selected="${productPage.size == 5}" value="5">5</option>
							<option th:selected="${productPage.size == 10}" value=" 10">10</option>
							<option th:selected="${productPage.size == 15}" value="15">15</option>
							<option th:selected="${productPage.size == 30}" value="20">20</option>
							<option th:selected="${productPage.size == 20}" value="30">30</option>
						</select>
					</div>
				</form>
				<nav aria-label="Page navigation" th:if="${productPage.totalPages > 0}">
					<ul class="pagination justify-content-center">
						<li th:class="${ 1== productPage.number+1} ? 'page-item active' : 'page-item'">
							<a th:href="@{/admin/product/searchpaginated(name=${name}, size=${productPage.size},page=${1})}"
								class="page-link">Fist Page </a>
						</li>

						<li class="page-item active" th:each="pageNumber : ${pageNumbers}"
							th:if="${productPage.totalPages > 1 }"
							th:class="${pageNumber == productPage.number + 1} ? 'page-item active' : 'page-item'">

							<a th:href="@{/admin/products/searchpaginated(name=${name}, size=${productPage.size},page=${pageNumber})}"
								class="page-link" th:text="${pageNumber}"> </a>
						</li>


						<li
							th:class="${ productPage.totalPages == productPage.number + 1 } ? 'page-item active' : 'page-item'">
							<a th:href="@{/admin/products/searchpaginated(name=${name}, size=${productPage.size},page=${productPage.totalPages})}"
								class="page-link">Last Page </a>
						</li>
					</ul>
				</nav>
			</div>
		</div>

		
	</section>

</body>

</html>